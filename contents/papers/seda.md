DEAD：一个用在良态和可伸缩互联网服务上的框架
=====================================

摘要
===
我们针对高并发互联网服务提出了一个新的设计，叫它staged event-driven architecture（SEDA）。SEDA想要支持严苛的并发需求并且简化良态服务的构建。在SEDA中，应用由一个被显式队列连接的事件驱动阶段网络组成。这个框架使服务更好的适应负载，防止当需求超过服务阈值时资源被过量使用。SEDA使用一个动态资源控制器(dynamic resource controllers)集来保持即使较大的负载波动情况下，stage也会在controller的控制范围内。我们描述一些列控制机制来自动调节和负载调节，包括线程池的大小，事件批量，和适应的负载分散。我们展现SEAD的设计和一个基于这个框架的互联网服务平台的实现。我们通过两个应用评估SEDA的使用：一个高性能的HTTP服务器和一个P2P文件共享网络Gnutella的包路由器。这些结果显示SEDA应用比传统应用设计具有更高的性能，并且针对较大变化的负载有更好的鲁棒性。

1、介绍
======

互联网使得一个计算机系统问题变成空前的规模：支持数百万用户访问的服务必须低延迟，鲁棒，并且一般情况下是可用的。并发session的数量和网站每天的点击率转换到一个更大量的I/O和网络请求，对底层资源的需求更是大。雅虎每天页面访问量12亿，AOL的网络缓存服务每天100亿命中。此外互联网服务有较大的服务负载波动。Slashdot Effect显示通常一个站点变得流程了会有超过100倍需求增长。针对互联网应用的需求增长，新的系统设计技术必须用来管理这些负载。

* 服务自己变得复杂，动态内容替换静态内容，需要更多的计算和IO
* 服务逻辑变化频繁，增加了工程和部署的复杂性
* 服务在通用目标上增长，而不是只针对某个特殊的服务（和目前的微服务观点相悖）

我们只关注性能方面的问题:在比较宽泛的服务遭受巨大的负载波动时性能的鲁棒性。

复制是服务伸缩性的关键方面。给出一个服务实例能够维持一个确定的性能级别，它必须通过复制来维持很多倍增长的负载。然而高峰负载可能比均值大很多，因此复制很多服务来处理潜在的最大需求是不实际的。所以，我们认为每个节点锁精力的负载是有较大尖峰的。

我们的目标是：开发一个通用框架来构建能够优雅处理负载的高并发和良态服务实例。

不幸的是传统的操作系统设计和对并发的广泛的优化模型都没有提供一个优化的方式管理负载。商业操作系统聚焦在提供最大的透明性

2、背景和相关工作
==============


2.1、基于线程的并发
================

2.2、固定大小线程池
================

为了避免线程的滥用，一些系统根据负载条件比较粗粒度的分配一个固定大小的线程池来提供服务。当请求数量超过某个上限，后续的请求将不能被服务。
这种方法被用在Apache，IIS等。

2.3 事件驱动的并发
================

2.4 结构化事件队列
================

3、分阶段事件驱动框架
==================

3.1、目标
========

3.2、阶段作为鲁邦的构建块
=====================

3.3、应用作为阶段的网络
====================

3.4、动态资源控制
===============

3.5、Sandstorm：一个SEDA的原型
============================

4、原始的异步I/O
==============

4.1、异步网络I/O
---------------

4.2、异步文件I/O
---------------

5、应用和评估
===========

5.1、Haboob：一个高性能的HTTP服务器
-------------------------------

### 5.1.1、Haboob架构 ###

### 5.1.2、Benchmark配置 ###

### 5.1.3、性能分析 ###

### 5.1.3、有适应能力的负载分散 ###

5.2、Gnutella的包路由
-------------------

### 5.2.1、架构 ###

### 5.2.2、来自慢套接字的保护 ###

### 5.2.3、负载条件行为 ###

6、讨论和结论
===========



